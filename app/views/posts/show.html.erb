<div class="container-fluid syllabus-page post-show">
  <div class="row lesson-navbar">
    <div class="container navbar-content">
      <div class="lesson-title">
        <%= @lesson.title %>
      </div>
      <div class="lesson-syllabus">
        <%= link_to syllabus_lesson_path(@lesson) do %>
        <i class="fa fa-list-ul" aria-hidden="true"></i>
        ç›®å½•
        <% end %>
      </div>
    </div>
  </div>

  <div class="container lesson-content">
    <div class="post-title">
      <%= @post.title %> <span class="pull-right">æ‰€å±ç« èŠ‚ï¼š<%= @chapter.title %></span>
    </div>
    <div class="post-content">
      <div class="intro-markdown">
        <%= raw @post.description %>
      </div>
    </div>
    <div class="post-eva">
      <div class="slogan">
        <span class="text">å¯¹æœ¬é¡µå†…å®¹çš„æ„Ÿå—å¦‚ä½•ï¼Ÿ</span>
        <button type="button" class="btn btn-default" id="feedback-btn-1" data-toggle="modal" data-target=".bs-example-modal-lg">
          ğŸ—£ æˆ‘è¦åæ§½
        </button>
      </div>
      <div class="row text-center feedback-btn-group">
        <div class="col-sm-4">
          <%= link_to upvote_post_path(@post), id: "feedback-btn-2", class: "btn btn-default" do %>
          <span class="emjoy">ğŸ˜„</span>
           <i style="display: none;" class="fa fa-spinner feedback-font-1 fa-spin fa-fw"></i>
           So easy
          <% end %>
        </div>
        <div class="col-sm-4">
          <%= link_to downvote_post_path(@post),  id: "feedback-btn-3", class: "btn btn-default"  do %>
          <span class="emjoy">ğŸ˜</span>
          <i style="display: none;" class="fa fa-spinner feedback-font-2 fa-spin fa-fw"></i>
          è¿˜Okå•¦
          <% end %>
        </div>
        <div class="col-sm-4">
          <button type="button" class="btn btn-default" id="feedback-btn-4" data-toggle="modal" data-target=".bs-example-modal-lg">
          <span class="emjoy">ğŸ˜­</span> å´©æºƒäº†
          </button>
        </div>
      </div>
    </div>
    <div class="post-page-footer text-center">
      <div class="btn-left">
        <% if @left.present? %>
        <%= link_to  post_path(@left), class: "btn btn-left-url btn-default" do %>
        <i class="fa fa-arrow-left" aria-hidden="true"></i>
        ä¸Šä¸€é¡µ
        <% end %>
        <% end %>
      </div>
      <div class="btn-alert">
        <i class="fa fa-lightbulb-o" aria-hidden="true"></i>
        å¯ä»¥ä½¿ç”¨
        <i class="fa fa-long-arrow-left" aria-hidden="true"></i><i class="fa fa-long-arrow-right" aria-hidden="true"></i>
        é”®è¿›è¡Œç¿»é¡µ
      </div>
      <div class="btn-right">
        <% if @right.present? %>
        <%= link_to post_path(@right), class: "btn btn-right-url btn-success" do %>
        ä¸‹ä¸€é¡µ
        <i class="fa fa-arrow-right" aria-hidden="true"></i>
        <% end %>
        <% end %>
      </div>
    </div>
  </div>
</div>

<!-- ä»¥ä¸‹æ˜¯æ¨¡æ€ -->
<!-- Large modal -->


<div class="modal fade feedback-modal bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="gridSystemModalLabel">é‡åˆ°ä»€ä¹ˆé—®é¢˜äº†å—ï¼Ÿ</h4>
      </div>
      <div class="content">

        <%= simple_form_for [@post, @post_eva],:remote => true, method: :post do |f| %>
        <%= f.input :content, label: "åé¦ˆï¼š" %>
        <!-- <%= f.input :eva_image %> -->
        <div class="modal-btn">
          <div class="modal-btn-1"><%= f.submit "åæ§½", class: "btn btn-success" %></div>
          <div class="modal-btn-2">
            <button type="button" class="btn btn-default" data-dismiss="modal">å–æ¶ˆ</button>
          </div>
        </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<!-- ä»¥ä¸‹æ˜¯å¼¹å‡ºæç¤ºæ¡ -->

<!-- Use a button to open the snackbar -->

<!-- The actual snackbar -->
<div id="snackbar">å·²æ”¶åˆ°æ‚¨çš„åé¦ˆï¼Œè°¢è°¢~</div>

<script>


// ä»¥ä¸‹æ˜¯soeasyçš„ajax
  $("#feedback-btn-2").click(function(evt){
    evt.preventDefault();
    var url = $(this).attr("href");

    $.ajax({
      url: url,
      method: "POST",
      data: { id: <%= @post.id %> },
      dataType: 'json',
      beforeSend: function(){
        $(".feedback-font-1").css("display", "inline-block");
       },
      success: function(data){
        $(".feedback-font-1").css("display", "none");
        $("#snackbar").addClass('show');
      },
      complete: function(){

        setTimeout(function (){


          $("#snackbar").removeClass('show');
        }, 3000);

      }
    })
  })
// ä»¥ä¸‹æ˜¯è¿˜okå•¦çš„ajax
  $("#feedback-btn-3").click(function(evt){
    evt.preventDefault();
    var url = $(this).attr("href");

    $.ajax({
      url: url,
      method: "POST",
      data: { id: <%= @post.id %> },
      dataType: 'json',
      beforeSend: function(){
        $(".feedback-font-2").css("display", "inline-block");
       },
      success: function(data){
        $(".feedback-font-2").css("display", "none");
        $("#snackbar").addClass('show');
      },
      complete: function(){

        setTimeout(function (){


          $("#snackbar").removeClass('show');
        }, 3000);

      }
    })
  })





document.onkeydown=function(event){
             var e = event || window.event || arguments.callee.caller.arguments[0];
             var left = $(".btn-left-url").attr("href");
             var right = $(".btn-right-url").attr("href");
             if(e && e.keyCode==37){
                <% if @left.present? %>
                window.location.href= left;
                <% end %>
               }
             if(e && e.keyCode==39){
               <% if @right.present? %>
               window.location.href= right;
               <% end %>

               }
         };

</script>
